
Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-qz9wl[0m
{"level":"warn","ts":1573158329.804348,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1573158329.8070743,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-v5cdn[0m
{"level":"warn","ts":1573158331.04323,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1573158331.04475,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source\""}

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-devopscamp2019-lunchup-backend-njd2d[0m
{"level":"warn","ts":1573158345.1379526,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1573158346.468725,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/DevOpsCamp2019/LunchUp-Backend.git @ v0.1.25 in path /workspace/source"}

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:d7589ba6fcb012b89343eda1cd868a462f929a1d
WARNING: no SHAs to merge, falling back to initial cloned commit

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-setup-jx-git-credentials[0m
Generated Git credentials file /workspace/xdg_config/git/credentials

Showing logs for build [32mdevopscamp2019-lunchup-backend-1[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] Downloading base image mcr.microsoft.com/dotnet/core/aspnet:3.0-buster-slim 
ERROR: logging before flag.Parse: E1107 20:25:49.319116      10 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E1107 20:25:49.322043      10 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
2019/11/07 20:25:49 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Error while retrieving image from cache: getting file info: stat /workspace/sha256:803b70d9de2c57a168af4cc7d44e77a9c0591b49ce2af73d50c344aa22048eda: no such file or directory 
[36mINFO[0m[0001] Downloading base image mcr.microsoft.com/dotnet/core/aspnet:3.0-buster-slim 
2019/11/07 20:25:50 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 80/tcp                  
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 443/tcp                 
[36mINFO[0m[0002] Skipping unpacking as no commands require it. 
[36mINFO[0m[0002] Taking snapshot of full filesystem...        
[36mINFO[0m[0003] ENV COMPlus_EnableDiagnostics=0              
[36mINFO[0m[0003] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0003] WORKDIR /app                                 
[36mINFO[0m[0003] cmd: workdir                                 
[36mINFO[0m[0003] Changed working directory to /app            
[36mINFO[0m[0003] Creating directory /app                      
[36mINFO[0m[0003] Taking snapshot of files...                  
[36mINFO[0m[0003] EXPOSE 80                                    
[36mINFO[0m[0003] cmd: EXPOSE                                  
[36mINFO[0m[0003] Adding exposed port: 80/tcp                  
[36mINFO[0m[0003] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0003] EXPOSE 443                                   
[36mINFO[0m[0003] cmd: EXPOSE                                  
[36mINFO[0m[0003] Adding exposed port: 443/tcp                 
[36mINFO[0m[0003] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0003] Storing source image from stage 0 at path /kaniko/stages/0 
[36mINFO[0m[0040] Deleting filesystem...                       
[36mINFO[0m[0040] Downloading base image mcr.microsoft.com/dotnet/core/sdk:3.0-buster 
2019/11/07 20:26:29 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0040] Error while retrieving image from cache: getting file info: stat /workspace/sha256:65c0187e27b42bc45ea5ef98226c7ef37d1b706e10031ddce377bf6da3dcd9aa: no such file or directory 
[36mINFO[0m[0040] Downloading base image mcr.microsoft.com/dotnet/core/sdk:3.0-buster 
2019/11/07 20:26:29 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0041] Using files from context: [/workspace/source/src/LunchUp.Backend] 
[36mINFO[0m[0041] Checking for cached layer gcr.io/deliverymachine/cache:121a13f5da2e594b67a0a5d6bd23989effbe8de08df0a6c376eb33700b1fde2e... 
[36mINFO[0m[0042] Using caching version of cmd: RUN dotnet restore "LunchUp.Backend/LunchUp.Backend.sln" 
[36mINFO[0m[0042] Using files from context: [/workspace/source] 
[36mINFO[0m[0042] Checking for cached layer gcr.io/deliverymachine/cache:ef6eb5084018298f5d8cdc5d1c4f58d75fcd30cb459e289b56fa3532a54ce42b... 
[36mINFO[0m[0043] No cached layer found for cmd RUN dotnet test 
[36mINFO[0m[0043] Unpacking rootfs as cmd RUN dotnet test requires it. 
[36mINFO[0m[0143] Taking snapshot of full filesystem...        
[36mINFO[0m[0464] ENV COMPlus_EnableDiagnostics=0              
[36mINFO[0m[0464] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0464] WORKDIR /src                                 
[36mINFO[0m[0464] cmd: workdir                                 
[36mINFO[0m[0464] Changed working directory to /src            
[36mINFO[0m[0464] Creating directory /src                      
[36mINFO[0m[0464] Taking snapshot of files...                  
[36mINFO[0m[0464] Using files from context: [/workspace/source/src/LunchUp.Backend] 
[36mINFO[0m[0465] COPY ["src/LunchUp.Backend/", "LunchUp.Backend/"] 
[36mINFO[0m[0465] Taking snapshot of files...                  
[36mINFO[0m[0465] RUN dotnet restore "LunchUp.Backend/LunchUp.Backend.sln" 
[36mINFO[0m[0465] Found cached layer, extracting to filesystem 
[36mINFO[0m[0498] Taking snapshot of files...                  
[36mINFO[0m[0555] Using files from context: [/workspace/source] 
[36mINFO[0m[0557] COPY . .                                     
[36mINFO[0m[0558] Taking snapshot of files...                  
[36mINFO[0m[0558] WORKDIR "/src/LunchUp.Backend"               
[36mINFO[0m[0558] cmd: workdir                                 
[36mINFO[0m[0558] Changed working directory to /src/LunchUp.Backend 
[36mINFO[0m[0558] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0558] RUN dotnet test                              
[36mINFO[0m[0558] cmd: /bin/sh                                 
[36mINFO[0m[0558] args: [-c dotnet test]                       
Test run for /src/LunchUp.Backend/LunchUp.Test/bin/Debug/netcoreapp3.0/LunchUp.Test.dll(.NETCoreApp,Version=v3.0)
Microsoft (R) Test Execution Command Line Tool Version 16.3.0
Copyright (c) Microsoft Corporation.  All rights reserved.

Starting test execution, please wait...

A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:16.62]     LunchUp.Test.Core.MatchingServiceTests.GivenExistingPersonEntityWithResponse_WhenGetSuggestions_ThenNothingReturned [FAIL]
[xUnit.net 00:00:16.63]     LunchUp.Test.Core.MatchingServiceTests.GivenOwnPersonEntityWithOptIn_WhenGetSuggestions_ThenNothingReturned [FAIL]
  X LunchUp.Test.Core.MatchingServiceTests.GivenExistingPersonEntityWithResponse_WhenGetSuggestions_ThenNothingReturned [58ms]
  Error Message:
   Assert.Empty() Failure
Collection: [PersonEntity { Company = null, Email = "peter.meier@google.com", Firstname = null, Id = a9c66542-0834-43e8-98c7-2077df9301b0, Lastname = null, ... }]
  Stack Trace:
     at LunchUp.Test.Core.MatchingServiceTests.GivenExistingPersonEntityWithResponse_WhenGetSuggestions_ThenNothingReturned() in /src/LunchUp.Backend/LunchUp.Test/Core/MatchingServiceTests.cs:line 71
  X LunchUp.Test.Core.MatchingServiceTests.GivenOwnPersonEntityWithOptIn_WhenGetSuggestions_ThenNothingReturned [5ms]
  Error Message:
   Assert.Empty() Failure
Collection: [PersonEntity { Company = null, Email = "john.doe@anonymous.com", Firstname = null, Id = ffadd232-ae03-4716-880a-610d12ae5ad8, Lastname = null, ... }]
  Stack Trace:
     at LunchUp.Test.Core.MatchingServiceTests.GivenOwnPersonEntityWithOptIn_WhenGetSuggestions_ThenNothingReturned() in /src/LunchUp.Backend/LunchUp.Test/Core/MatchingServiceTests.cs:line 55

Test Run Failed.
Total tests: 10
     Passed: 8
     Failed: 2
 Total time: 22.8557 Seconds
error building image: error building stage: waiting for process to exit: exit status 1
[31m
Pipeline failed on stage 'from-build-pack' : container 'step-build-container-build'. The execution of the pipeline has stopped.[0m
