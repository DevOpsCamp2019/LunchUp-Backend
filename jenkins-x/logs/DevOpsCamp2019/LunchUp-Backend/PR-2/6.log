
Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-credential-initializer-8jsfb[0m
{"level":"warn","ts":1572965028.0247483,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1572965028.0254738,"logger":"fallback-logger","caller":"creds-init/main.go:40","msg":"Credentials initialized."}

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-working-dir-initializer-l2764[0m
{"level":"warn","ts":1572965028.5335324,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: open /var/run/ko/HEAD: no such file or directory"}
{"level":"info","ts":1572965028.5357618,"logger":"fallback-logger","caller":"bash/main.go:65","msg":"Successfully executed command \"mkdir -p /workspace/source\""}

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-place-tools[0m

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-git-source-devopscamp2019-lunchup-backend-c6rnv[0m
{"level":"warn","ts":1572965035.581014,"logger":"fallback-logger","caller":"logging/config.go:69","msg":"Fetch GitHub commit ID from kodata failed: \"ref: refs/heads/master\" is not a valid GitHub commit ID"}
{"level":"info","ts":1572965036.626497,"logger":"fallback-logger","caller":"git/git.go:102","msg":"Successfully cloned https://github.com/DevOpsCamp2019/LunchUp-Backend.git @ master in path /workspace/source"}

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-git-merge[0m
Using SHAs from PULL_REFS=master:24f9777c7a8544f8d2e4f01e4d6ca72b8a12c4ce,2:bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3
DEBUG: ran git fetch --unshallow origin bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3: 24f9777c7a8544f8d2e4f01e4d6ca72b8a12c4ce: in 
DEBUG: ran git checkout master in 
DEBUG: ran git reset --hard 24f9777c7a8544f8d2e4f01e4d6ca72b8a12c4ce in 
DEBUG: ran clean --force -d . in 
DEBUG: ran git merge bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3 in 
Merged SHA 8e43a2b19a516d4187a54dc486082d1afc3832a1 with commit message 'Merge commit 'bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3'' into base branch master
Merged SHA bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3 with commit message 'add postgres security context' into base branch master
Merged SHA 72c8eb739f97c548c4f2af3824f1dff73b929cec with commit message 'add postgres username and password' into base branch master
Merged SHA c579c78ad163cd0eb6978470e94abf332db14479 with commit message 'Add version to preview chart.yaml' into base branch master
Merged SHA c5c65d63bb4d8fdd1bc0ba412bed42d4bfd565b1 with commit message 'add potential workaround for mysterious file not found issue' into base branch master
Merged SHA 0b77589002f82cc6dbf9e015c0b19d4f6aee2a2f with commit message 'add alias and move postgres above preview dependency' into base branch master
Merged SHA 7f24541484a5880e8e11c7182ac035d7e42bd1fd with commit message 'add postrgres to requirements.yml' into base branch master

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-build-container-build[0m
[36mINFO[0m[0000] Downloading base image mcr.microsoft.com/dotnet/core/aspnet:3.0-buster-slim 
ERROR: logging before flag.Parse: E1105 14:43:58.997931      10 metadata.go:142] while reading 'google-dockercfg' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg
ERROR: logging before flag.Parse: E1105 14:43:59.001977      10 metadata.go:159] while reading 'google-dockercfg-url' metadata: http status code: 404 while fetching url http://metadata.google.internal./computeMetadata/v1/instance/attributes/google-dockercfg-url
2019/11/05 14:43:59 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0001] Error while retrieving image from cache: getting file info: stat /workspace/sha256:803b70d9de2c57a168af4cc7d44e77a9c0591b49ce2af73d50c344aa22048eda: no such file or directory 
[36mINFO[0m[0001] Downloading base image mcr.microsoft.com/dotnet/core/aspnet:3.0-buster-slim 
2019/11/05 14:43:59 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 80/tcp                  
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 443/tcp                 
[36mINFO[0m[0002] Skipping unpacking as no commands require it. 
[36mINFO[0m[0002] Taking snapshot of full filesystem...        
[36mINFO[0m[0002] ENV COMPlus_EnableDiagnostics=0              
[36mINFO[0m[0002] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0002] WORKDIR /app                                 
[36mINFO[0m[0002] cmd: workdir                                 
[36mINFO[0m[0002] Changed working directory to /app            
[36mINFO[0m[0002] Creating directory /app                      
[36mINFO[0m[0002] Taking snapshot of files...                  
[36mINFO[0m[0002] EXPOSE 80                                    
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 80/tcp                  
[36mINFO[0m[0002] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0002] EXPOSE 443                                   
[36mINFO[0m[0002] cmd: EXPOSE                                  
[36mINFO[0m[0002] Adding exposed port: 443/tcp                 
[36mINFO[0m[0002] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0002] Storing source image from stage 0 at path /kaniko/stages/0 
[36mINFO[0m[0021] Deleting filesystem...                       
[36mINFO[0m[0021] Downloading base image mcr.microsoft.com/dotnet/core/sdk:3.0-buster 
2019/11/05 14:44:20 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0022] Error while retrieving image from cache: getting file info: stat /workspace/sha256:65c0187e27b42bc45ea5ef98226c7ef37d1b706e10031ddce377bf6da3dcd9aa: no such file or directory 
[36mINFO[0m[0022] Downloading base image mcr.microsoft.com/dotnet/core/sdk:3.0-buster 
2019/11/05 14:44:21 No matching credentials were found, falling back on anonymous
[36mINFO[0m[0023] Using files from context: [/workspace/source/src/LunchUp.Backend] 
[36mINFO[0m[0023] Checking for cached layer gcr.io/deliverymachine/cache:558e1ac8c2fecf3753b89a1d6d9de35183784c2a74387a5ed51c8d6bb80794d2... 
[36mINFO[0m[0023] No cached layer found for cmd RUN dotnet restore "LunchUp.Backend/LunchUp.Backend.sln" 
[36mINFO[0m[0023] Unpacking rootfs as cmd RUN dotnet restore "LunchUp.Backend/LunchUp.Backend.sln" requires it. 
[36mINFO[0m[0054] Taking snapshot of full filesystem...        
[36mINFO[0m[0058] ENV COMPlus_EnableDiagnostics=0              
[36mINFO[0m[0058] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0058] WORKDIR /src                                 
[36mINFO[0m[0058] cmd: workdir                                 
[36mINFO[0m[0058] Changed working directory to /src            
[36mINFO[0m[0058] Creating directory /src                      
[36mINFO[0m[0058] Taking snapshot of files...                  
[36mINFO[0m[0058] Using files from context: [/workspace/source/src/LunchUp.Backend] 
[36mINFO[0m[0058] COPY ["src/LunchUp.Backend/", "LunchUp.Backend/"] 
[36mINFO[0m[0058] Taking snapshot of files...                  
[36mINFO[0m[0058] RUN dotnet restore "LunchUp.Backend/LunchUp.Backend.sln" 
[36mINFO[0m[0058] cmd: /bin/sh                                 
[36mINFO[0m[0058] args: [-c dotnet restore "LunchUp.Backend/LunchUp.Backend.sln"] 
  Restore completed in 4.59 sec for /src/LunchUp.Backend/LunchUp.Core/LunchUp.Core.csproj.
  Restore completed in 4.59 sec for /src/LunchUp.Backend/LunchUp.Model/LunchUp.Model.csproj.
  Restore completed in 5.23 sec for /src/LunchUp.Backend/LunchUp.WebHost/LunchUp.WebHost.csproj.
[36mINFO[0m[0070] Taking snapshot of full filesystem...        
[36mINFO[0m[0077] ignoring socket dotnet-diagnostic-59-96751-socket, not adding to tar 
[36mINFO[0m[0087] Pushing layer gcr.io/deliverymachine/cache:558e1ac8c2fecf3753b89a1d6d9de35183784c2a74387a5ed51c8d6bb80794d2 to cache now 
[36mINFO[0m[0087] Using files from context: [/workspace/source] 
[36mINFO[0m[0087] COPY . .                                     
[36mINFO[0m[0088] Taking snapshot of files...                  
[36mINFO[0m[0088] WORKDIR "/src/LunchUp.Backend"               
[36mINFO[0m[0088] cmd: workdir                                 
[36mINFO[0m[0088] Changed working directory to /src/LunchUp.Backend 
[36mINFO[0m[0088] No files changed in this command, skipping snapshotting. 
[36mINFO[0m[0088] RUN dotnet build "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/build 
[36mINFO[0m[0088] cmd: /bin/sh                                 
[36mINFO[0m[0088] args: [-c dotnet build "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/build] 
Microsoft (R) Build Engine version 16.3.0+0f4c62fea for .NET Core
Copyright (C) Microsoft Corporation. All rights reserved.

  Restore completed in 36.98 ms for /src/LunchUp.Backend/LunchUp.Core/LunchUp.Core.csproj.
  Restore completed in 36.98 ms for /src/LunchUp.Backend/LunchUp.Model/LunchUp.Model.csproj.
  Restore completed in 3.53 ms for /src/LunchUp.Backend/LunchUp.WebHost/LunchUp.WebHost.csproj.
2019/11/05 14:45:30 pushed blob: sha256:ce572be3854f729a3046c309fc41bc434e92dd85e6700548c9b50453423a7dcc
  LunchUp.Model -> /app/build/LunchUp.Model.dll
  LunchUp.Core -> /app/build/LunchUp.Core.dll
  LunchUp.WebHost -> /app/build/LunchUp.WebHost.dll

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:09.75
[36mINFO[0m[0098] Taking snapshot of full filesystem...        
[36mINFO[0m[0106] ignoring socket g+DM1dBf3hsd22AO8JuBabg4ChjyflqwMaiOYpIurSs, not adding to tar 
[36mINFO[0m[0106] ignoring socket dotnet-diagnostic-157-100004-socket, not adding to tar 
[36mINFO[0m[0106] ignoring socket dotnet-diagnostic-128-99714-socket, not adding to tar 
[36mINFO[0m[0108] Pushing layer gcr.io/deliverymachine/cache:13096c3c14ceea5f45767c8e84c6f7aec36e76adce90ed690053b7e8c7931d53 to cache now 
2019/11/05 14:45:51 pushed blob: sha256:090fe82a834dcf485b60c6b590d221201e33c509244992d2e0ba922ddc2ac316
2019/11/05 14:45:51 pushed blob: sha256:30d5e0fd6ac42852f2a97960211fcf44096ada8ecd315bcca60c0e6afc3e5492
2019/11/05 14:45:53 gcr.io/deliverymachine/cache:558e1ac8c2fecf3753b89a1d6d9de35183784c2a74387a5ed51c8d6bb80794d2: digest: sha256:a340ab0cbbd6101b3aad278ce5288512466039fa27e0eec6ee46b8acc92ed318 size: 430
2019/11/05 14:45:53 pushed blob: sha256:a254179b0a85484e0539e5ffba25d4cf4df334e4917f9a3b782d09652418983e
2019/11/05 14:45:55 gcr.io/deliverymachine/cache:13096c3c14ceea5f45767c8e84c6f7aec36e76adce90ed690053b7e8c7931d53: digest: sha256:97845319a9ca8cffc43f12f89c929d023403ed1ad67f7d22b4578f53f100cd47 size: 429
[36mINFO[0m[0116] Storing source image from stage 1 at path /kaniko/stages/1 
[36mINFO[0m[0184] Deleting filesystem...                       
[36mINFO[0m[0185] Base image from previous stage 1 found, using saved tar at path /kaniko/stages/1 
[36mINFO[0m[0187] Checking for cached layer gcr.io/deliverymachine/cache:23f827a4ccbe5a204c392eeacbeb8d4794fda6802dd8d8c9a642670a1c5da5b6... 
[36mINFO[0m[0188] No cached layer found for cmd RUN dotnet publish "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/publish 
[36mINFO[0m[0188] Unpacking rootfs as cmd RUN dotnet publish "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/publish requires it. 
[36mINFO[0m[0205] Taking snapshot of full filesystem...        
[36mINFO[0m[0215] RUN dotnet publish "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/publish 
[36mINFO[0m[0215] cmd: /bin/sh                                 
[36mINFO[0m[0215] args: [-c dotnet publish "LunchUp.WebHost/LunchUp.WebHost.csproj" -c Release -o /app/publish] 
Microsoft (R) Build Engine version 16.3.0+0f4c62fea for .NET Core
Copyright (C) Microsoft Corporation. All rights reserved.

  Restore completed in 33.18 ms for /src/LunchUp.Backend/LunchUp.Model/LunchUp.Model.csproj.
  Restore completed in 33.18 ms for /src/LunchUp.Backend/LunchUp.Core/LunchUp.Core.csproj.
  Restore completed in 2.86 ms for /src/LunchUp.Backend/LunchUp.WebHost/LunchUp.WebHost.csproj.
  LunchUp.Model -> /src/LunchUp.Backend/LunchUp.Model/bin/Release/netcoreapp3.0/LunchUp.Model.dll
  LunchUp.Core -> /src/LunchUp.Backend/LunchUp.Core/bin/Release/netcoreapp3.0/LunchUp.Core.dll
  LunchUp.WebHost -> /src/LunchUp.Backend/LunchUp.WebHost/bin/Release/netcoreapp3.0/LunchUp.WebHost.dll
  LunchUp.WebHost -> /app/publish/
[36mINFO[0m[0220] Taking snapshot of full filesystem...        
[36mINFO[0m[0224] ignoring socket dotnet-diagnostic-230-112491-socket, not adding to tar 
[36mINFO[0m[0227] Pushing layer gcr.io/deliverymachine/cache:23f827a4ccbe5a204c392eeacbeb8d4794fda6802dd8d8c9a642670a1c5da5b6 to cache now 
2019/11/05 14:47:49 pushed blob: sha256:48a94ae2ba578fb09df79625592e06ccdd7b0286d263a5a75161ce3fa259412b
2019/11/05 14:47:54 pushed blob: sha256:624383c79a517fdc27c239321c37c3c22120007649765f9965ceb2e3dfa100be
2019/11/05 14:47:55 gcr.io/deliverymachine/cache:23f827a4ccbe5a204c392eeacbeb8d4794fda6802dd8d8c9a642670a1c5da5b6: digest: sha256:8c8c97348cb851db9e1c7eddd488e642f517f2844f74d2930d32b751cb47689c size: 429
[36mINFO[0m[0236] Storing source image from stage 2 at path /kaniko/stages/2 
[36mINFO[0m[0256] Deleting filesystem...                       
[36mINFO[0m[0258] Base image from previous stage 0 found, using saved tar at path /kaniko/stages/0 
[36mINFO[0m[0259] Skipping unpacking as no commands require it. 
[36mINFO[0m[0259] Taking snapshot of full filesystem...        
[36mINFO[0m[0265] WORKDIR /app                                 
[36mINFO[0m[0265] cmd: workdir                                 
[36mINFO[0m[0265] Changed working directory to /app            
[36mINFO[0m[0265] Creating directory /app                      
[36mINFO[0m[0265] Taking snapshot of files...                  
[36mINFO[0m[0265] COPY --from=publish /app/publish .           
[36mINFO[0m[0265] Taking snapshot of files...                  
[36mINFO[0m[0266] ENTRYPOINT ["dotnet", "LunchUp.WebHost.dll"] 
[36mINFO[0m[0266] No files changed in this command, skipping snapshotting. 
2019/11/05 14:48:25 existing blob: sha256:a9e6ceefc5a08dc7b1b04a1105c47e00e9340349177009bc8926571ee8a39204
2019/11/05 14:48:25 existing blob: sha256:68f6aee67b9130df079abf2476334ad9474e116c69efedd19e272bbff3643971
2019/11/05 14:48:25 existing blob: sha256:8d691f585fa8cec0eba196be460cfaffd69939782d6162986c3e0c5225d54f02
2019/11/05 14:48:25 existing blob: sha256:9526604e089d8d4aa947f34e52a14ac8793232dd181022932f3c15291c5cd3af
2019/11/05 14:48:25 existing blob: sha256:7a6b64767b0b4ec3bb235712bc93f6cada4812dbfec432d98ca9c485f9ce2ea8
2019/11/05 14:48:29 pushed blob: sha256:cd82e3737d290a27e86e5bfb0e2447fb3d91e4f8043218b85da17afe87f4c986
2019/11/05 14:48:29 pushed blob: sha256:3f577986737018a800e0877c25d0664ae9d2f5acff3486cca99b1ab9b8563f31
2019/11/05 14:48:29 pushed blob: sha256:32cc54370cf300e4b29e8a94644ad91b46da63bb44fa9ecdddd739564ce3c19f
2019/11/05 14:48:32 pushed blob: sha256:a47dd4f89ae7458ffd49aea2716a32ecdaa52fc460889b365dec202d2176079c
2019/11/05 14:48:34 gcr.io/deliverymachine/lunchup-backend:0.0.0-SNAPSHOT-PR-2-6: digest: sha256:cc97989cc18deb63e9b1c0dd03a12f0ba12eb01cc3c6de6a0f981c2777cfeb1e size: 1572

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-postbuild-post-build[0m
no CVE provider running in the current ** namespace so skip adding image to be analysed

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-make-preview[0m
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-2-6/" Chart.yaml
sed -i -e "s/version:.*/version: 0.0.0-SNAPSHOT-PR-2-6/" ../*/Chart.yaml
sed -i -e "s|repository:.*|repository: gcr.io\/devopscamp2019\/lunchup-backend|" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-2-6/" values.yaml
sed -i -e "s/tag:.*/tag: 0.0.0-SNAPSHOT-PR-2-6/" values.yaml
pwd
/workspace/source/charts/preview
ls
Chart.yaml
Makefile
requirements.yaml
templates
values.yaml
ls ..
lunchup-backend
preview
echo "  version: 0.0.0-SNAPSHOT-PR-2-6" >> requirements.yaml
** step helm build
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: storage.googleapis.com https://storage.googleapis.com/chartmuseum.jenkins-x.io
Successfully added Helm repository storage.googleapis.com.
Adding missing Helm repo: jenkins-x-chartmuseum http://jenkins-x-chartmuseum:8080
Successfully added Helm repository jenkins-x-chartmuseum.
WARNING: No $CHART_REPOSITORY defined so using the default value of: http://jenkins-x-chartmuseum:8080
Adding missing Helm repo: chartmuseum.jenkins-x.io http://chartmuseum.jenkins-x.io
Successfully added Helm repository chartmuseum.jenkins-x.io.

Showing logs for build [32mdevopscamp2019-lunchup-backend-bnnzh-6[0m stage [32mfrom-build-pack[0m and container [32mstep-promote-jx-preview[0m
Creating a preview
Commit author email is empty for: 7f24541484a5880e8e11c7182ac035d7e42bd1fd
Looking for commits in: /workspace/source/
Commit author email is empty for: 0b77589002f82cc6dbf9e015c0b19d4f6aee2a2f
Looking for commits in: /workspace/source/
Commit author email is empty for: c5c65d63bb4d8fdd1bc0ba412bed42d4bfd565b1
Looking for commits in: /workspace/source/
Commit author email is empty for: c579c78ad163cd0eb6978470e94abf332db14479
Looking for commits in: /workspace/source/
Commit author email is empty for: 72c8eb739f97c548c4f2af3824f1dff73b929cec
Looking for commits in: /workspace/source/
Commit author email is empty for: bd95a7d2a7b585aeeb82b391b012ca3f5de61fa3
Looking for commits in: /workspace/source/
Found commit author match for: valkyrjaa with email address: tuana1998@hotmail.de
expose:
  Annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-delete-policy: hook-succeeded
  config:
    domain: 34.65.166.10.nip.io
    exposer: Ingress
    http: "true"
preview:
  image:
    repository: gcr.io/deliverymachine/LunchUp-Backend
    tag: 0.0.0-SNAPSHOT-PR-2-6
Cloning the Jenkins X versions repo https://github.com/jenkins-x/jenkins-x-versions.git with ref refs/heads/master to /builder/home/.**/jenkins-x-versions


WARNING: Could not find the service URL in namespace **-devopscamp2019-lunchup-backend-pr-2 for names LunchUp-Backend, preview, **-devopscamp2019-lunchup-backend-pr-2-preview, preview-LunchUp-Backend: the server could not find the requested resource (get services.serving.knative.dev preview-LunchUp-Backend)
Updating PipelineActivities devopscamp2019-lunchup-backend-pr-2-6 which has status Running
WARNING: Failed to find the service LunchUp-Backend : failed to find service LunchUp-Backend in namespace **-devopscamp2019-lunchup-backend-pr-2: services "LunchUp-Backend" not found
